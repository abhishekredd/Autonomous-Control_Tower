# Check if PostgreSQL is running
docker-compose ps postgres

# Check connection from API container
docker-compose exec api python -c "
import psycopg2
try:
    conn = psycopg2.connect('postgresql://control_tower_user:secure_password@postgres/control_tower_db')
    print('✅ Database connection successful')
except Exception as e:
    print(f'❌ Database connection failed: {e}')
"

# Reset database
docker-compose down -v
docker-compose up -d postgres
sleep 5
alembic upgrade head
python scripts/seed_data_enhanced.py